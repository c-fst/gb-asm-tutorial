<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Tiles - GB ASM Tutorial</title>

        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:site:id" content="@gbdev0"/>
        <meta property="og:title" content="Tiles - GB ASM Tutorial" />
        <meta property="og:image" content="https://gbdev.io/gb-asm-tutorial/assets/banner/1200x628.png" />
        <meta property="og:site_name" content="GB ASM Tutorial"/>

        <meta name="description" content="A complete guide to programming Game Boy games in assembly.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../css/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Home</a></li><li class="chapter-item affix "><a href="../roadmap.html">Tabella di marcia</a></li><li class="chapter-item affix "><a href="../help-feedback.html">Help</a></li><li class="chapter-item affix "><li class="part-title">Parte ‚Ö† - Hello World!</li><li class="chapter-item "><a href="../part1/setup.html"><strong aria-hidden="true">1.</strong> Configurazione</a></li><li class="chapter-item "><a href="../part1/hello_world.html"><strong aria-hidden="true">2.</strong> Hello World!</a></li><li class="chapter-item "><a href="../part1/toolchain.html"><strong aria-hidden="true">3.</strong> Strumenti di lavoro</a></li><li class="chapter-item "><a href="../part1/bin_and_hex.html"><strong aria-hidden="true">4.</strong> Binario ed esadecimale</a></li><li class="chapter-item "><a href="../part1/registers.html"><strong aria-hidden="true">5.</strong> Registri</a></li><li class="chapter-item "><a href="../part1/assembly.html"><strong aria-hidden="true">6.</strong> Basi di Assembly</a></li><li class="chapter-item "><a href="../part1/memory.html"><strong aria-hidden="true">7.</strong> Memoria</a></li><li class="chapter-item "><a href="../part1/header.html"><strong aria-hidden="true">8.</strong> The header</a></li><li class="chapter-item "><a href="../part1/operations.html"><strong aria-hidden="true">9.</strong> Operazioni e flags</a></li><li class="chapter-item "><a href="../part1/jumps.html"><strong aria-hidden="true">10.</strong> Jumps</a></li><li class="chapter-item "><a href="../part1/tracing.html"><strong aria-hidden="true">11.</strong> Tracing</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> Grafica</div><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../part1/tiles.html" class="active"><strong aria-hidden="true">12.1.</strong> Tiles</a></li><li class="chapter-item "><a href="../part1/palettes.html"><strong aria-hidden="true">12.2.</strong> Palette</a></li><li class="chapter-item "><a href="../part1/tilemap.html"><strong aria-hidden="true">12.3.</strong> Tilemap</a></li></ol></li><li class="chapter-item "><a href="../part1/wrapup.html"><strong aria-hidden="true">13.</strong> In conclusione</a></li><li class="chapter-item affix "><li class="part-title">Parte ‚Ö° - Il nostro primo gioco</li><li class="chapter-item "><a href="../part2/getting-started.html"><strong aria-hidden="true">14.</strong> Per iniziare</a></li><li class="chapter-item "><a href="../part2/objects.html"><strong aria-hidden="true">15.</strong> Oggetti</a></li><li class="chapter-item "><a href="../part2/functions.html"><strong aria-hidden="true">16.</strong> Funzioni</a></li><li class="chapter-item "><a href="../part2/input.html"><strong aria-hidden="true">17.</strong> Input</a></li><li class="chapter-item "><a href="../part2/collision.html"><strong aria-hidden="true">18.</strong> Collisioni</a></li><li class="chapter-item "><a href="../part2/bricks.html"><strong aria-hidden="true">19.</strong> Bricks</a></li><li class="chapter-item "><a href="../part2/wip.html"><strong aria-hidden="true">20.</strong> Lavori in corso</a></li><li class="chapter-item affix "><li class="part-title">Parte ‚Ö¢ - Il nostro secondo gioco</li><li class="chapter-item "><div><strong aria-hidden="true">21.</strong> Da scrivere...</div></li><li class="spacer"></li><li class="chapter-item affix "><a href="../next.html">Prossimi passi</a></li><li class="chapter-item affix "><a href="../resources.html">Risorse</a></li><li class="chapter-item affix "><a href="../thanks.html">Ringraziamenti</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GB ASM Tutorial</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <button id="language-toggle" class="icon-button" type="button"
                                title="Change language" aria-label="Change language"
                                aria-haspopup="true" aria-expanded="false"
                                aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="en">English</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="it">Italian</a>
                          </button></li>
                        </ul>

                        <script>
                          let langToggle = document.getElementById("language-toggle");
                          let langList = document.getElementById("language-list");
                          langToggle.addEventListener("click", (event) => {
                              langList.style.display = langList.style.display == "block" ? "none" : "block";
                          });
                          let selectedLang = document.getElementById("it");
                          selectedLang.parentNode.classList.add("theme-selected");

                          // The path to the root, taking the current
                          // language into account.
                          let full_path_to_root = "../../";
                          // The page path (mdbook only gives us
                          // access to the path to the Markdown file).
                          let path = "part1/tiles.md".replace(/\.md$/, ".html");
                          for (let lang of langList.querySelectorAll("a")) {
                              if (lang.id == "en") {
                                  lang.href = `${full_path_to_root}${path}`;
                              } else {
                                  lang.href = `${full_path_to_root}${lang.id}/${path}`;
                              }
                          }
                        </script>

                        
                        <a href="https://github.com/gbdev/gb-asm-tutorial" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/gbdev/gb-asm-tutorial/edit/main/po/it.po"
                           title="Suggest an edit to the translation" aria-label="Suggest an edit to the translation">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="piastrelle"><a class="header" href="#piastrelle">piastrelle</a></h1>
<div class="box tip decorated">
<div><p>üí≠</p></div>
<div>
<p>Le ‚Äútessere‚Äù venivano chiamate in modo diverso nella documentazione di un tempo.
Di solito venivano chiamate ‚Äúschemi‚Äù o ‚Äúcaratteri‚Äù, e quest‚Äôultima abbreviazione ha dato origine all‚Äôabbreviazione ‚ÄúCHR‚Äù che a volte viene usata per riferirsi alle tessere.</p>
<p>Ad esempio, sul NES, i dati dei tile sono solitamente forniti dalla cartuccia in <a href="http://wiki.nesdev.com/w/index.php/CHR_ROM_vs._CHR_RAM">CHR ROM o CHR RAM</a>.
Il termine ‚ÄúCHR‚Äù non √® tipicamente utilizzato sul Game Boy, anche se gli scambi tra le comunit√† fanno s√¨ che i termini ‚Äútrapelino‚Äù, per cui alcuni si riferiscono all‚Äôarea della VRAM in cui sono memorizzati i tile come ‚ÄúCHR RAM‚Äù o ‚ÄúCHR VRAM‚Äù, ad esempio.</p>
<p>Come per tutti i gerghi di questo tipo, il cui significato pu√≤ dipendere dall‚Äôinterlocutore, per coerenza mi atterr√≤ a ‚Äúpiastrelle‚Äù in tutto il tutorial, essendo ormai lo standard pi√π diffuso nella comunit√† degli sviluppatori di GB.</p>
</div>
</div>
<p>Copiare questi dati alla cieca va benissimo, ma perch√© i dati sono ‚Äúgrafici‚Äù?</p>
<figure>
  <img src="../assets/img/ah_yes_pixels.png" alt="Screenshot of some tile definitions in the code">
  <figcaption><q>Ah, s√¨, i pixel.</q></figcaption>
</figure>
<p>Vediamo un po‚Äô!</p>
<h2 id="mano-utile"><a class="header" href="#mano-utile">Mano utile</a></h2>
<p>Now, figuring out the format with an explanation alone is going to be very confusing; but fortunately, Emulicious got us covered thanks to its <em>Tile Viewer</em>.
You can open it either by selecting ‚ÄúTools‚Äù then ‚ÄúTile Viewer‚Äù, or by clicking on the grid of colored tiles in the debugger‚Äôs toolbar.</p>
<p><img src="../assets/img/vram_viewer.png" alt="Screenshot of the Tile Viewer" /></p>
<p>You can combine the various VRAM viewers by going to ‚ÄúView‚Äù, then ‚ÄúCombine Video Viewers‚Äù.
We will come to the other viewers in due time.
This one shows the tiles present in the Game Boy‚Äôs video memory (or ‚Äú<abbr title="Video RAM">VRAM</abbr>‚Äù).</p>
<div class="box tip decorated">
<div><p>ü§î</p></div>
<div>
<p>Vi invito a sperimentare con il visualizzatore di VRAM, a passare il mouse sulle cose, a spuntare e deselezionare le caselle di controllo, a vedere da soli come stanno le cose. Tutte le domande che vi verranno poste troveranno risposta a tempo debito, non preoccupatevi! E se quello che vedete in seguito non corrisponde alle mie schermate, assicuratevi che le caselle di controllo corrispondano alle mie.</p>
</div>
</div>
<p>Don‚Äôt mind the ‚Äú¬Æ‚Äù icon in the top-left; we did not put it there ourselves, and we will see why it‚Äôs there later.</p>
<h2 id="primer-breve"><a class="header" href="#primer-breve">Primer breve</a></h2>
<p>Potreste aver gi√† sentito parlare di tiles, soprattutto perch√© erano molto popolari nei sistemi a 8 e 16 bit.
Non √® una coincidenza: i tiles sono molto utili.
Invece di memorizzare ogni pixel sullo schermo (144 √ó 160 pixel √ó 2 bit/pixel = 46080 bit = 5760 byte, rispetto agli 8192 byte di VRAM della console), i pixel vengono raggruppati in tile, che vengono poi assemblati in vari modi per produrre l‚Äôimmagine finale.</p>
<p>In particolare, le tessere possono essere riutilizzate molto facilmente e praticamente a costo zero, risparmiando molta memoria!
Inoltre, la manipolazione di intere tessere in una sola volta √® molto pi√π economica rispetto alla manipolazione dei singoli pixel, e questo fa risparmiare tempo di elaborazione.</p>
<p>Il concetto di ‚Äúpiastrella‚Äù √® molto generico, ma sul Game Boy le piastrelle sono <em>sempre</em> di 8 per 8 pixel.
Spesso le tessere hardware vengono raggruppate per essere manipolate come tessere pi√π grandi (spesso 16√ó16); per evitare la confusione, queste vengono chiamate <strong>meta-tessere</strong>.</p>
<h3 id="bpp"><a class="header" href="#bpp">‚Äúbpp‚Äù?</a></h3>
<p>Vi starete chiedendo da dove provenga la cifra di ‚Äú2 bit/pixel‚Äù di cui sopra‚Ä¶
Si tratta della cosiddetta ‚Äúprofondit√† di bit‚Äù.</p>
<p>I colori non sono memorizzati nelle tessere stesse!
Invece, funziona come un libro da colorare: la piastrella stessa contiene <em>indici</em> di 8 x 8, non colori; si d√† all‚Äôhardware una piastrella e un insieme di colori - una <strong>paletta</strong> - e lui li colora!
(Questo √® anche il motivo per cui gli scambi di colore erano molto comuni all‚Äôepoca: si potevano creare variazioni nemiche memorizzando piccole tavolozze invece di grandi grafiche diverse).</p>
<p>In ogni caso, le tavolozze del Game Boy sono grandi 4 colori.<sup class="footnote-reference"><a href="#pal_size">1</a></sup>
Ci√≤ significa che gli indici di tali tavolozze, memorizzati nelle tessere, possono essere rappresentati con soli <em>due bit</em>!
Questo √® chiamato ‚Äú2 bit per pixel‚Äù, noto come ‚Äú2bpp‚Äù.</p>
<p>Con queste premesse, siamo pronti a spiegare come questi byte si trasformano in pixel!</p>
<h2 id="codifica"><a class="header" href="#codifica">Codifica</a></h2>
<p>Come ho spiegato, ogni pixel occupa 2 bit.
Poich√© ci sono 8 bit in un byte, ci si potrebbe aspettare che ogni byte contenga 4 pixel‚Ä¶ e non sarebbe n√© del tutto giusto n√© del tutto sbagliato.
Ogni riga di 8 pixel √® memorizzata in 2 byte, ma nessuno di questi byte contiene le informazioni per 4 pixel.
(Pensate a una banconota da 10 ‚Ç¨ strappata a met√†: nessuna delle due met√† ha valore, ma la banconota intera vale, beh, 10 ‚Ç¨).</p>
<p>Per ogni pixel, il bit meno significativo del suo indice √® memorizzato nel primo byte, mentre il bit pi√π significativo √® memorizzato nel secondo byte.
Poich√© ogni byte √® una raccolta di uno dei bit di ciascun pixel, viene chiamato <strong>bitplane</strong>.</p>
<p>Il pixel pi√π a sinistra √® memorizzato nel bit pi√π a sinistra di entrambi i byte, il pixel alla sua destra nel secondo bit pi√π a sinistra e cos√¨ via.
La prima coppia di byte memorizza la riga superiore, il secondo byte quella inferiore e cos√¨ via.</p>
<p>Ecco una dimostrazione pi√π visiva; si noti che √® per il SNES, ma il suo formato 2BPP √® lo stesso del Game Boy.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/txkHN6izK2Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Questa codifica pu√≤ sembrare un po‚Äô strana all‚Äôinizio, e pu√≤ esserlo; √® fatta per essere pi√π conveniente per l‚Äôhardware da decodificare, mantenendo la circuiteria semplice e a basso consumo.
Rende possibili anche alcuni trucchi interessanti, come vedremo (molto) pi√π avanti!</p>
<p>Si possono trovare ulteriori informazioni sulla codifica <a href="https://gbdev.io/pandocs/Tile_Data.html">nei Pan Docs</a> e <a href="https://www.huderlem.com/demos/gameboy2bpp.html">nel sito di ShantyTown</a>.</p>
<p>Nella prossima lezione vedremo come si applicano i colori!</p>
<hr />
<div class="footnote-definition" id="pal_size"><sup class="footnote-definition-label">1</sup>
<p>Altre console possono avere profondit√† di bit diverse; ad esempio, lo SNES ha 2bpp, 4bpp e 8bpp a seconda della modalit√† grafica e di alcuni altri parametri.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../part1/tracing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../part1/palettes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../part1/tracing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../part1/palettes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../js/linenos.js"></script>


    </body>
</html>
